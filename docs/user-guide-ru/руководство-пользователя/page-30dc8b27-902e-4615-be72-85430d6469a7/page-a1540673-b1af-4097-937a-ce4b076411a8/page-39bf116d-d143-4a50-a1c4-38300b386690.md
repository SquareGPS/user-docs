# Определение стоянок

Система обнаружения стоянок определяет, когда объект неподвижен в течение определенного периода времени и в пределах установленного порога скорости, используя данные GPS.

![image-20241031-094758.png](attachments/image-20241031-094758.png)

**Параметры для обнаружения парковки:**

- **Минимальное время обнаружения холостого хода** (`min_parking`): Это минимальное время, в течение которого объект должен оставаться неподвижным, чтобы считаться припаркованным.
- **Максимальная частота вращения холостого хода** (`min_speed`): Это порог скорости, при котором объект должен оставаться на месте, чтобы быть определенным как припаркованный.

По умолчанию эти параметры установлены на 5 минут и 3 км/ч соответственно.

**Условия обнаружения парковки:**

- **По скорости и времени**:  
Состояние парковки определяется, когда скорость объекта падает ниже определенного значения `min_speed` и остается там дольше, чем `min_parking`. Остановки короче, чем `min_parking` не считаются парковкой и не прерывают поездку.
- **Учитывая зажигание**:
  - Поездка начинается, если скорость больше или равна `min_speed` при включенном зажигании.
  - Поездка заканчивается, если скорость падает ниже `min_speed` и либо истекшее время превышает `min_parking` или зажигание выключено.
- **Учитывая датчик движения**:
  - Поездка начинается, если скорость больше или равна `min_speed` и датчик движения обнаруживает движение.
  - Поездка заканчивается, если скорость падает ниже `min_speed` или датчик движения не обнаруживает движения, а истекшее время превышает `min_parking`.
- **Учитывая как движение, так и зажигание**:
  - Состояние зажигания имеет приоритет перед датчиком движения.
  - Поездка начинается, если скорость больше или равна `min_speed`Если датчик движения обнаруживает движение и зажигание включено.
  - Поездка заканчивается, если скорость падает ниже `min_speed` или датчик движения не обнаруживает движения, а истекшее время превышает `min_parking` при выключенном зажигании.

Эти настройки позволяют точно настроить распознавание парковки, чтобы оно точно отражало реальное поведение автомобиля, минимизируя ложные обнаружения и повышая точность отслеживания поездок.